# Описание
Данный Docker-образ предназначен для развертывания сервера 1С:Предприятие с интегрированной СУБД PostgreSQL 17. Образ основан на akocur/postgresql-1c-17:latest и содержит все необходимые компоненты для запуска информационных баз 1С.

## Компоненты
* PostgreSQL 17, оптимизированный для работы с 1С:Предприятие
* Сервер 1С:Предприятие (серверная часть, общие компоненты, веб-сервисы)
* Необходимые библиотеки и зависимости для корректной работы

## Структура каталогов
В образе созданы следующие каталоги:

* `/dt/main-branch` - для хранения файлов dt (выгрузок информационных баз)
* `/src/main-branch` - для исходных кодов конфигураций
* `/cf/main-branch` - для файлов cf (конфигураций)
* `/configs/main-branch` - для файлов настроек автономных серверов
* `/ibservers` - рабочие каталоги автономных серверов

## Порты
Образ открывает следующие порты:

* 1540-1541 - для кластера серверов 1С
* 1560-1591 - для рабочих процессов 1С
* 8080 - HTTP-сервис
* 8282 - дополнительный порт для веб-сервисов
* 8314 - дополнительный порт для веб-сервисов

## Использование

### Запуск контейнера
```bash
docker run -d --name ibsrv-postgresql-17 \
  -p 1540-1541:1540-1541 \
  -p 1560-1591:1560-1591 \
  -p 8080:8080 \
  -p 8282:8282 \
  -p 8314:8314 \
  -v /path/to/dt:/dt \
  -v /path/to/src:/src \
  -v /path/to/cf:/cf \
  -v /path/to/configs:/configs \
  ibsrv-postgresql-17
```

### Сборка образа
```bash
docker build -t ibsrv-postgresql-17 .
```

## Примечания
* Для корректной работы необходимо предварительно скачать дистрибутивы 1С:Предприятие (файлы .deb) и разместить их в директории distributions/ перед сборкой образа
* Запуск сервисов осуществляется через скрипт /start.sh, который должен быть доступен в базовом образе
* Контейнер запускается от имени пользователя root

## Требования
* Docker 19.03 или выше
* Дистрибутивы 1С:Предприятие (версия 8.3)

## Лицензирование
Для использования данного образа необходимо наличие лицензий на программные продукты 1С:Предприятие. Данный образ не содержит лицензионных файлов.
