# Описание
Данный Docker-образ предназначен для развертывания сервера 1С:Предприятие с интегрированной СУБД PostgreSQL 17.
Образ основан на akocur/postgresql-1c-17:latest и содержит все необходимые компоненты для запуска информационных баз 1С.

## Компоненты
* PostgreSQL 17, оптимизированный для работы с 1С:Предприятие
* Сервер 1С:Предприятие (серверная часть, общие компоненты, веб-сервисы)
* Необходимые библиотеки и зависимости для корректной работы

## Структура каталогов
В образе созданы следующие каталоги:

* `/dt` - для хранения файлов dt (выгрузок информационных баз)
* `/src` - для xml-файлов конфигурации
* `/bin` - для файлов cf, сfe, epf, erf
* `/configs` - для файлов настроек автономных серверов
* `/ibservers` - рабочие каталоги автономных серверов
  * `/ibservers/main` - основной рабочий каталог (предпочтительно для тестов)
  * `/ibservers/with-data` - каталог с данными (возможно с данными из рабочей базы данных)

## Порты
Предполагается, что один контейнер может содержать до 5 автономных серверов. Поэтому образ может открыть следующие
порты:

* 1540-1559 - для gates:direct:regport и gates:direct:range
* 8080-8084 - для gates:http:port
* 8282-8286 - для подключения по ssh
* 8314-8318 - для server:port

## Использование

### Запуск контейнера
```bash
docker run -d --name ibsrv-postgresql-17 \
  -p 1540-1559:1540-1559 \
  -p 8080-8084:8080-8084 \
  -p 8314-8318:8314-8318 \
  -v /path/to/dt:/dt \
  -v /path/to/bin:/bin \
  -v /path/to/configs:/configs \
  ibsrv-postgresql-17
```
### Сборка образа
1. Предварительно скачать дистрибутивы 1С:Предприятие (файлы .deb) и разместить их в директории distributions/перед
сборкой образа.

2. Выполнить сборку образа:
```bash
docker build -t ibsrv-<version>-postgresql-17 .
```
Например
```bash
docker build -t ibsrv-8.3.25.1374-postgresql-17 .
```

## Требования
* Docker 19.03 или выше
* Дистрибутивы 1С:Предприятие (версия 8.3.20 и выше)

## Лицензирование
Для использования данного образа необходимо наличие лицензий на программные продукты 1С:Предприятие. Данный образ не
содержит лицензионных файлов.
